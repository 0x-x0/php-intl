build_image: drydock/u14phpallCustom

language:php

php:5.6

# environment variable
build:
 cache: true
 cache_dir_list:
    -  /root/.phpenv/versions/$(phpenv version-name)/lib/php/extensions/

 ci:
    - mkdir -p shippable/testresults
    - mkdir -p shippable/codecoverage
    #- echo "extension=intl.so" >> $HOME/.phpenv/versions/$(phpenv version-name)/etc/php.ini;
    - pickle install intl
    - echo "extension=intl.so" >> $HOME/.phpenv/versions/$(phpenv version-name)/etc/php.ini;
    - phpunit  --log-junit shippable/testresults/junit.xml --coverage-xml shippable/codecoverage test.php
  
 on_failure:
    - echo "Wow build failed"
